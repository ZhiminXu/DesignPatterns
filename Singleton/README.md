# Singleton
## 1 动机
一些特殊类在系统中只能存在一个实例，才能保证逻辑正确或者良好的算法效率。绕开构造器，提供一个机制保证一个类只有一个实例。
这是类的设计者的责任而不是使用者的责任。
## 2 定义
保证一个类仅有一个实例，并提供一个该实例的全局访问点
## 3 特点
- 实例构造器也可以设置为protected，为子类派生所用。
- Singleton一般不要支持拷贝构造函数与Clonejiekou ,因为这可能导致多个对象实例，与设计初衷违背。
- 要思考如何实现多线程安全的Singleton，注意双检查锁的正确实现。
## 4 代码举例
- 总体思路：类的构造函数、拷贝构造函数、赋值构造函数）设为私有，包含一个私有的该类静态对象指针，提供公有的静态函数返回该指针。
- Signleton.h 饿汉模式实现，类加载时完成实例的创建，线程安全。
- Singleton1.h 懒汉模式实现，调用时单次检查，多线程不安全。
- Signleton2.h 懒汉模式实现，调用时单次检查加锁，多线程安全，但是存在性能问题。
- Singleton3.h 懒汉模式实现，调用时双检查锁，存在***内存读写reorder的情况***，同样不安全。
- Singleton4.h 懒汉模式实现，调用时双检查锁，关闭内存reorder，多线程安全。