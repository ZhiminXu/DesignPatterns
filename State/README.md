# State
## 1 动机
对象状态改变是行为也发生改变，如文档处于只读和读写状态是支持的行为不同，如何在运行时根据对象状态透明改变对象行为，而不为对象操作和状态转化之间引入紧耦合。
## 2 定义
允许一个对象在其内部状态改变是改变行为，使对象看起来似乎修改了行为
## 3 特点
- State模式将所有与一个对象相关的行为都放入State子类，对象状态切换时，切换相应的State子类对象
- 为不同的状态引入不同的对象，是状态转换更加明确，因为转换是原子性的，保证不会出现转换不一致的情况。
- State变量没有实例变量时，可以使用单例模式，节省开销。
## 4 代码举例
- 在游戏中，人Person可以站立、蹲着、趴下，三种状态行走方式不同，同时通过按键盘上下键，依次可以在三种装填间切换，站立按下切换为蹲着，蹲下按下切换为趴下，反之亦反。
- Person包含状态对象指针，SetState方法，MoveOn行走方法，以及相应键盘上下键OnKeyDown、OnKeyUp方法。
- State基类包含Up、Down、Action三个接口，均传入Person指针，派生站立状态StandState、蹲着状态SquatState、趴着状态LieProneState，各派生类各自处理状态切换和Action。
- StandStae的Up方法不做任何处理（站立时不响应键盘上键，只相应下键），Down方法中将人的状态设置为SquatState，Action方法为人步行。