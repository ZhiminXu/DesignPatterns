# Composite
## 1 动机
- 客户代码过多的依赖对象容器复杂的内部实现结构，对象内部实现结构（非抽象接口）的变化将引起客户代码频繁的变化，不易维护扩展。
- 客户代码与复杂容器对象的解耦，让容器自己来实现复杂结构，客户用起来像简单对象一样。
## 2 定义
将对象组合成树形结构，以表示部分整体的层次结构，Composite使用户对单个对象和组合对象的使用具有一致性。
## 3 特点
- Composite将客户与对象一对多的关系转换为一对一关系，客户可以一致地处理简单对象和容器（继承的同时，包含一对多的组合）。
- 客户代码与抽象接口依赖，而不与对象容器的内部结构依赖，从而较好应对变化。
- 具体实现中，可以让父对象中的子对象反向回溯；
- 如果父对象有频繁的遍历需求，可使用缓存技巧改善效率
## 4 代码举例
- Component抽象类包含了添加子对象Add、移除子对象Add、和Remove方法；
- Component派生CompositeComponent组合类，包含一个Component类对象的容器，实现Add与Remove方法，Operation方法中循环调用容器中每一个Component对象的Operation方法。
- Component派生LeafComponent叶对象，实现Add，Remove函数为空，表明叶对象无法添加子对象。